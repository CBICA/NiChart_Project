pipeline_name: SPARE Scores - CVM (Unharmonized)
description: |
  Pipeline which uses DLMUSE and DLWMLS to produce SPARE CVM estimation.

steps:
  - id: run_dlmuse
    tool: nichart_dlmuse
    inputs:
      t1_img: ${STUDY}/t1
    outputs:
      dlmuse_seg: ${STUDY}/DLMUSE_seg
      dlmuse_vol: ${STUDY}/DLMUSE_vol

  - id: run_nichart_dlwmls
    tool: nichart_dlwmls_v2 # MUST CORRESPOND EXACTLY to a tool in resources/tools dir
    inputs:
      t1_img: ${STUDY}/t1
      fl_img: ${STUDY}/fl
      dlmuse_seg: ${STUDY}/DLMUSE_seg

    outputs:
      nichart_dlwmls_out: ${STUDY}/NiChart_DLWMLS_out

  - id: run_spare_cvm
    tool: spare_cvm # MUST CORRESPOND EXACTLY to a tool in resources/tools dir
    inputs:
      nichart_dlwmls_csv: ${STUDY}/NiChart_DLWMLS_out/DLWMLS_DLMUSE_Segmented_Volumes.csv
      demog_csv: ${STUDY}/participants/participants.csv
    outputs:
      spare_cvm_csv: ${STUDY}/SPARE_CVM_csv/SPARE_CVM.csv
    