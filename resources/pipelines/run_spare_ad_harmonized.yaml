pipeline_name: SPARE Scores - Alzheimer's Disease
description: |
  Pipeline which uses harmonized DLMUSE to produce Alzheimer's Disease SPARE scores.

steps:
  - id: run_nichart_dlmuse
    tool: nichart_dlmuse # MUST CORRESPOND EXACTLY to a tool in resources/tools dir
    inputs:
      t1_img: ${STUDY}/t1
    outputs:
      dlmuse_seg: ${STUDY}/DLMUSE_seg
      dlmuse_vol: ${STUDY}/DLMUSE_vol
  - id: harmonize_dlmuse
    tool: harmonize_dlmuse
    inputs:
      dlmuse_csv_unharmonized: ${STUDY}/DLMUSE_vol/DLMUSE_Volumes.csv
      covariate_csv: ${STUDY}/lists/demog.csv
    outputs: # Harmonization wrapper expects output location as dir
      dlmuse_csv_harmonized: ${STUDY}/DLMUSE_vol_harmonized
  - id: run_spare_ad
    tool: spare_ad_harmonized # MUST CORRESPOND EXACTLY to a tool in resources/tools dir
    inputs:
      harmonized_dlmuse_vol: ${STUDY}/DLMUSE_vol_harmonized/Harmonized_DLMUSE_Volumes.csv
    outputs:
      spare_ad_csv: ${STUDY}/SPARE_AD_csv_harmonized/SPARE_AD.csv
    