name: NiChart_BAScores 
description: This tool extracts direct image-to-biomarker scores of brain aging and (WIP) produces attention mappings for visualization.

dependencies: # Names of dependencies. To make another tool's output a dependency, place its name in this list
  - t1_img

inputs:
  t1_img:
    type: directory

outputs:
  out:
    type: directory

mounts:
  t1_img:
    path_in_container: /input/t1
    mode: ro
  out_csv:
    path_in_container: /output/BAScores.csv
    mode: rw
  out_attention:
    path_in_container: /output/output_attention
    mode: rw

parameters:
  {} # Empty dictionary to signify no parameters

resources: # Used to allocate jobs on the cloud. Please be diligent.
  vcpus: 4
  memory: 14000 # Amount must be in MiB, see https://docs.aws.amazon.com/batch/latest/APIReference/API_ResourceRequirement.html
  gpus: 1

container:
  image: cbica/nichart_bascores:0.0.1
  command: -i {t1_img} -o {out_attention} --csv {out_csv}
