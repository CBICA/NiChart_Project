name: nichart_dlwmls
description: This tool segments white matter lesions on FLAIR MRI brain scans.

dependencies: # Names of dependencies. To make another tool's output a dependency, place its name in this list
  - fl_img

inputs:
  fl_img:
    type: directory

outputs:
  dlwmls_seg:
    type: directory
  dlwmls_vol:
    type: file

mounts:
  fl_img:
    path_in_container: /input
    mode: ro
  dlwmls_seg:
    path_in_container: /output_seg
    mode: rw
  dlwmls_vol:
    path_in_container: /output_vol/DLWMLS_Volumes.csv
    mode: rw

parameters:
  {} # Empty dictionary to signify no parameters

resources: # Used to allocate jobs on the cloud. Please be diligent.
  vcpus: 4
  memory: 28000 # Amount must be in MiB, see https://docs.aws.amazon.com/batch/latest/APIReference/API_ResourceRequirement.html
  gpus: 1

container:
  image: cbica/dlwmls_wrapped:0.0.1
  command: --in_dir {fl_img} --out_seg {dlwmls_seg} --out_csv {dlwmls_vol} -device cuda

