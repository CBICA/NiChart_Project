name: spare_ad_harmonized
description: This tool takes a harmonized DLMUSE CSV and uses SPARE to produce an Alzheimer's Disease score.

inputs:
  harmonized_dlmuse_vol:
    type: file

outputs:
  spare_ad_csv:
    type: file

mounts:
  harmonized_dlmuse_vol:
    path_in_container: /dlmuse_vol
    mode: ro
  spare_ad_csv:
    path_in_container: /SPARE_AD.csv
    mode: rw

parameters:
  {} # Empty dictionary to signify no parameters

resources: # Used to allocate jobs on the cloud. Please be diligent.
  vcpus: 2
  memory: 8000 # Amount must be in MiB, see https://docs.aws.amazon.com/batch/latest/APIReference/API_ResourceRequirement.html
  gpus: 0

container:
  image: cbica/nichart_spare_score:0.0.1
  command: "-i {harmonized_dlmuse_vol} -m /spare_score/spare_scores/mdl/SPARE_AD_harmonized.pkl.gz -o {spare_ad_csv}"
