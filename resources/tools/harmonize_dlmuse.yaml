name: nichart_dlmuse 
description: This tool harmonizes the output from DLMUSE to the large reference data set using covariates/demographics.

dependencies: # Names of dependencies. To make another tool's output a dependency, place its name in this list
  - t1_img

inputs:
  dlmuse_vol_unharmonized:
    type: file
  covariate_csv:
    type: file
  
outputs: # "Harmonized_DLMUSE_Volumes.csv"
  dlmuse_vol_harmonized: # Application expects output location to be a dir, places file inside
    type: directory # Just so that we can recreate the individual subject-level CSVs if we want

mounts:
  dlmuse_vol_unharmonized:
    path_in_container: /input/unharmonized_DLMUSE_Volumes.csv
    mode: ro
  covariate_csv:
    path_in_container: /input/covariates.csv
    mode: ro
  dlmuse_vol_harmonized:
    path_in_container: /output/dlmuse_vol_harmonized
    mode: rw


parameters:
  {} # Empty dictionary to signify no parameters

resources: # Used to allocate jobs on the cloud. Please be diligent.
  vcpus: 4
  memory: 14000 # Amount must be in MiB, see https://docs.aws.amazon.com/batch/latest/APIReference/API_ResourceRequirement.html
  gpus: 0

container:
  image: cbica/combatfam_harmonize_dlmuse:0.0.1
  command: -i {dlmuse_vol_unharmonized} -c {covariate_csv} -o {dlmuse_vol_harmonized} 
